{"version":3,"file":"cache_test.js","sourceRoot":"","sources":["../../../src/test/directives/cache_test.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {cache} from '../../directives/cache.js';\nimport {render} from '../../lib/render.js';\nimport {html} from '../../lit-html.js';\nimport {stripExpressionMarkers} from '../test-utils/strip-markers.js';\n\nconst assert = chai.assert;\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nsuite('cache', () => {\n  let container: HTMLDivElement;\n\n  setup(() => {\n    container = document.createElement('div');\n  });\n\n  test('caches templates', () => {\n    const renderCached = (condition: any, v: string) => render(\n        html`${\n            cache(\n                condition ? html`<div v=${v}></div>` :\n                            html`<span v=${v}></span>`)}`,\n        container);\n\n    renderCached(true, 'A');\n    assert.equal(\n        stripExpressionMarkers(container.innerHTML), '<div v=\"A\"></div>');\n    const element1 = container.firstElementChild;\n\n    renderCached(false, 'B');\n    assert.equal(\n        stripExpressionMarkers(container.innerHTML), '<span v=\"B\"></span>');\n    const element2 = container.firstElementChild;\n\n    assert.notStrictEqual(element1, element2);\n\n    renderCached(true, 'C');\n    assert.equal(\n        stripExpressionMarkers(container.innerHTML), '<div v=\"C\"></div>');\n    assert.strictEqual(container.firstElementChild, element1);\n\n    renderCached(false, 'D');\n    assert.equal(\n        stripExpressionMarkers(container.innerHTML), '<span v=\"D\"></span>');\n    assert.strictEqual(container.firstElementChild, element2);\n  });\n\n  test('renders non-TemplateResults', () => {\n    render(html`${cache('abc')}`, container);\n    assert.equal(stripExpressionMarkers(container.innerHTML), 'abc');\n  });\n\n  test('caches templates when switching against non-TemplateResults', () => {\n    const renderCached = (condition: any, v: string) => render(\n        html`${cache(condition ? html`<div v=${v}></div>` : v)}`, container);\n\n    renderCached(true, 'A');\n    assert.equal(\n        stripExpressionMarkers(container.innerHTML), '<div v=\"A\"></div>');\n    const element1 = container.firstElementChild;\n\n    renderCached(false, 'B');\n    assert.equal(stripExpressionMarkers(container.innerHTML), 'B');\n\n    renderCached(true, 'C');\n    assert.equal(\n        stripExpressionMarkers(container.innerHTML), '<div v=\"C\"></div>');\n    assert.strictEqual(container.firstElementChild, element1);\n\n    renderCached(false, 'D');\n    assert.equal(stripExpressionMarkers(container.innerHTML), 'D');\n  });\n});\n"]}